# COPD æ•°å­—å­ªç”Ÿè‚ºé¡¹ç›® - è¿›åº¦è¿½è¸ªæ–‡æ¡£

**æ›´æ–°æ—¥æœŸï¼š** 2025å¹´12æœˆ30æ—¥
**é¡¹ç›®åç§°ï¼š** åŸºäºå…¨ä»£ç è‡ªåŠ¨åŒ–çš„COPDæ•°å­—å­ªç”Ÿè‚ºæ„å»ºä¸3Då¯è§†åŒ–ç ”ç©¶

> **2025-12-25 é‡è¦æ›´æ–°**ï¼šåˆ†å‰²æ–¹æ¡ˆ
> - è‚ºå¶åˆ†å‰²ï¼šLungMask LTRCLobes_R231ï¼ˆè¾¹ç•Œæ¸…æ™°ï¼Œæ— ç¢ç‰‡åŒ–ï¼‰
> - æ°”ç®¡æ ‘åˆ†å‰²ï¼šTotalSegmentator `--task lung_vessels`ï¼ˆå®Œæ•´æ”¯æ°”ç®¡æ ‘ 3-4 çº§åˆ†æ”¯ï¼‰
>   - é»˜è®¤ `--task total` ä»…è¾“å‡ºä¸»æ°”ç®¡
>   - `--task lung_vessels` è¾“å‡º `lung_trachea_bronchia.nii.gz`

---

## è¿›åº¦å›¾ä¾‹

| æ ‡è®° | å«ä¹‰ |
|:----:|:-----|
| `[ ]` | æœªå¼€å§‹ (Not Started) |
| `[~]` | è¿›è¡Œä¸­ (In Progress) |
| `[x]` | å·²å®Œæˆ (Completed) |

---

## ä¸€ã€é¡¹ç›®åˆ†é˜¶æ®µæ‰§è¡Œæµç¨‹å›¾

```
================================================================================
              COPD æ•°å­—å­ªç”Ÿè‚ºé¡¹ç›® - åˆ†é˜¶æ®µæ‰§è¡Œæµç¨‹å›¾ (å¸¦è¿›åº¦è¿½è¸ª)
================================================================================

+------------------------------------------------------------------------------+
| [x] PHASE 1: MVP - åŸºç¡€è®¾æ–½ä¸æœ€å°é—­ç¯ âœ… å®Œæˆäº 2025-12-09                   |
+------------------------------------------------------------------------------+
| ç›®æ ‡: ç”¨æå°‘æ•°æ®è·‘é€šå®Œæ•´æµç¨‹ï¼ŒéªŒè¯å¼€å‘ç¯å¢ƒ                                   |
| è¾“å…¥: 3ä¾‹æ­£å¸¸è‚º + 1ä¾‹COPD                                                    |
|                                                                              |
| ä»»åŠ¡æµç¨‹:                                                                    |
|   [x] ç¯å¢ƒé…ç½® -> [x] æ•°æ®æ¸…æ´— -> [x] ç®€å•é…å‡† -> [x] å¯è§†åŒ–éªŒè¯             |
|       Python3.9+     run_segment    é€‰1ä¾‹æ­£å¸¸è‚º    static_render.py          |
|       PyTorch        clean_bg.py    ä½œä¸´æ—¶åº•åº§    render_multiview()         |
|       ANTsPy         precise_lung   register.py                              |
|                                                                              |
| è¾“å‡º: 9å¼ å¤šè§†è§’3Dæ¸²æŸ“æˆªå›¾ (æ¨¡æ¿/åŸå§‹/é…å‡†å Ã— X/Y/Zè½´)                       |
| éªŒæ”¶: [x] ç°è‰²è‚º + çº¢è‰²ç—…ç¶æ¸…æ™°å¯è§  [x] é…å‡†ä¿ç•™ç‡81%                       |
+------------------------------------------------------------------------------+
                                      |
                                      v
+------------------------------------------------------------------------------+
| [x] PHASE 2: Atlas Construction - æ ‡å‡†åº•åº§æ„å»º âœ… å®Œæˆäº 2025-12-30          |
+------------------------------------------------------------------------------+
| ç›®æ ‡: ç”Ÿæˆé«˜è´¨é‡æ•°å­—å­ªç”Ÿåº•åº§ï¼ˆå«æ°”ç®¡æ ‘ï¼‰                                     |
| è¾“å…¥: 37ä¾‹æ­£å¸¸è‚ºCT + 29ä¾‹COPD CT                                             |
|                                                                              |
| ä»»åŠ¡æµç¨‹:                                                                    |
|   [x] æ•°æ®æ‰©å…… -> [x] æ„å»ºæ¨¡ç‰ˆ -> [x] ç»“æœå›ºåŒ–                               |
|       æ”¶é›†æ­£å¸¸è‚º    build_template_ants.py    å­˜å…¥ data/02_atlas/            |
|                     (è¿è¡Œçº¦ä¸€æ•´å¤œ)                                           |
|                                                                              |
| æ–°å¢åŠŸèƒ½ (2025-12-25 æ›´æ–°):                                                  |
|   [x] è‚ºå¶åˆ†å‰² (segment_lung_lobes_lungmask, LungMask)                       |
|   [x] æ°”ç®¡æ ‘åˆ†å‰² (segment_airway_totalsegmentator, TotalSegmentator)         |
|   [x] æ‰¹é‡åˆ†å‰²å…¥å£ (run_lungmask_batch)                                      |
|   [x] æ°”ç®¡æ ‘æ¨¡æ¿ç”Ÿæˆ (generate_template_trachea_mask)                        |
|   [x] æ°”ç®¡æ ‘ä¼˜åŒ– (adaptive_erosion_trachea, 2025-12-30)                      |
|                                                                              |
| è¾“å‡º: standard_template.nii.gz, standard_mask.nii.gz,                        |
|       standard_trachea_mask.nii.gz, standard_lung_lobes_labeled.nii.gz       |
| éªŒæ”¶: [x] Dice>=0.85  [x] è¡€ç®¡/æ°”ç®¡ç»“æ„æ¸…æ™°  [x] æ°”ç®¡æ ‘ä½“ç´ æ•°66,412          |
+------------------------------------------------------------------------------+
                                      |
                                      v
+------------------------------------------------------------------------------+
| [~] PHASE 3: Mapping & AI Fusion - ç—…ç†æ˜ å°„ä¸AIèåˆ ğŸš§ å¼€å‘ä¸­                |
+------------------------------------------------------------------------------+
| ç›®æ ‡: æ‰¹é‡å¤„ç†COPDï¼Œè®­ç»ƒAIï¼Œç”ŸæˆèåˆCT                                       |
| è¾“å…¥: 30-50ä¾‹COPD + æ ‡å‡†åº•åº§                                                 |
|                                                                              |
| ä»»åŠ¡æµç¨‹:                                                                    |
|   [ ] æ‰¹é‡æ˜ å°„ -> [ ] AIè®­ç»ƒ(20-34å¤©) -> [ ] æœ€ç»ˆèåˆ                        |
|       é…å‡†æ‰€æœ‰COPD   |                    inference_fuse.py                 |
|       ç—…ç¶æ‰­æ›²åˆ°     +-> [ ] Patchæ„å»º(3-5d)  åº•åº§+Mask->æŒ–ç©º->AIå¡«          |
|       æ ‡å‡†ç©ºé—´       +-> [ ] æ¨¡å‹å®ç°(5-7d)                                  |
|                      +-> [ ] è®­ç»ƒè°ƒå‚(7-14d)                                 |
|                      +-> [ ] æ¨ç†åå¤„ç†(2-3d)                                |
|                      +-> [ ] è¯„ä¼°è¿­ä»£(3-5d)                                  |
|                                                                              |
| è¾“å‡º: fused_copd_twin.nii.gz, mapped_lesion_mask.nii.gz                      |
| éªŒæ”¶: [ ] SSIM>=0.85  [ ] è¾¹ç•Œæ— æ–­è£‚  [ ] Lossæ”¶æ•›                           |
+------------------------------------------------------------------------------+
                                      |
                                      v
+------------------------------------------------------------------------------+
| [ ] PHASE 4: Final Demo - å…¨ä»£ç äº¤äº’æ¼”ç¤º                                     |
+------------------------------------------------------------------------------+
| ç›®æ ‡: äº§å‡ºè®ºæ–‡å›¾ç‰‡å’Œç­”è¾©è§†é¢‘                                                 |
| è¾“å…¥: èåˆCT + ç—…ç¶Mask                                                      |
|                                                                              |
| ä»»åŠ¡æµç¨‹:                                                                    |
|   [ ] åŠ¨æ€æ¨¡æ‹Ÿ -> [ ] æˆæœè¾“å‡º                                               |
|       dynamic_breath.py    å½•åˆ¶è§†é¢‘.mp4                                      |
|       sin(t)å½¢å˜           æˆªå–é«˜æ¸…å›¾>=3å¼                                    |
|       COPDå‘¼æ°”å»¶è¿Ÿ         ç”ŸæˆGIFåŠ¨ç”»                                       |
|                                                                              |
| è¾“å‡º: demo_video.mp4, figure_1~n.png                                         |
| éªŒæ”¶: [ ] å¸§ç‡>=15FPS  [ ] å‘¼å¸å‘¨æœŸå¯åŒºåˆ†  [ ] ç—…ç¶é«˜äº®                       |
+------------------------------------------------------------------------------+
                                      |
                                      v
                            [ ] é¡¹ç›®å®Œæˆ! è®ºæ–‡/ç­”è¾©
```

---

## äºŒã€é¡¹ç›®æ•´ä½“æŠ€æœ¯æ¶æ„å›¾

```
================================================================================
                COPD æ•°å­—å­ªç”Ÿè‚ºé¡¹ç›® - æŠ€æœ¯æ¶æ„æ€»è§ˆ
================================================================================

[æŠ€æœ¯æ ˆ] ======================================================================
+------------------+------------------+------------------+------------------+
| TotalSegmentator |     ANTsPy       |     PyTorch      |     PyVista      |
| è‡ªåŠ¨è‚ºéƒ¨åˆ†å‰²     | SyNéçº¿æ€§é…å‡†    | U-Net/GAN        | VTKä½“æ¸²æŸ“        |
| å¤šå™¨å®˜æå–       | æ¨¡æ¿æ„å»º         | Inpainting       | åŠ¨æ€åŠ¨ç”»         |
+--------+---------+--------+---------+--------+---------+--------+---------+
         |                  |                  |                  |
         v                  v                  v                  v
[ä»£ç å±‚ src/] =================================================================
+----------------+----------------+----------------+----------------+----------------+
|01_preprocess/  |02_atlas_build/ |03_registration/|04_texture_syn/ |05_visualization|
|----------------|----------------|----------------|----------------|----------------|
|run_segment.py  |build_template_ |register_       |dataset.py      |static_render.py|
|clean_bg.py     |ants.py         |lesions.py      |network.py      |dynamic_breath. |
|extract_emphy.py|                |                |losses.py       |py              |
|                |                |                |train.py        |                |
|                |                |                |inference_fuse. |                |
+-------+--------+-------+--------+-------+--------+-------+--------+-------+--------+
        |                |                |                |                |
        +----------------+----------------+----------------+----------------+
                                          |
                                          v
                    +--------------------------------------------------------------+
                    |                  src/utils/ å·¥å…·å±‚                          |
                    |--------------------------------------------------------------|
                    | io.py | logger.py | metrics.py | data_quality.py | validation.py |
                    | NIfTI | ç»Ÿä¸€æ—¥å¿—  | SSIM/Dice  | è¾“å…¥æ•°æ®æ£€æŸ¥    | é…å‡†éªŒè¯      |
                    +--------------------------------------------------------------+
                                          |
                                          v
[æ•°æ®å±‚ data/] ================================================================
+-------------+     +-------------+     +-------------+     +-------------+     +-------------+
|  00_raw/    | --> | 01_cleaned/ | --> |  02_atlas/  |     |  03_mapped/ | --> |04_final_viz/|
|-------------|     |-------------|     |-------------|     |-------------|     |-------------|
| normal/     |     | normal_clean|     | standard_   |     | patient_xxx/|     | fused_copd_ |
| copd/       |     | copd_clean/ |     | template.   | --> | warped.nii  |     | twin.nii.gz |
| (DICOM/NIfTI|     |             |     | nii.gz      |     | transform.  |     | renders/    |
|  åªè¯»)      |     |             |     | mask.nii.gz |     | mat         |     |  fig_*.png  |
+-------------+     +-------------+     +------+------+     +-------------+     +-------------+
                                               |                   ^
                                               +-------------------+

[æ•°æ®æµ] ======================================================================

åŸå§‹CT    çº¯å‡€è‚º     æ ‡å‡†åº•åº§    æ˜ å°„ç—…ç¶    èåˆCT     3Dæ¼”ç¤º
(DICOM)   (NIfTI)   (Template)  (Warped)   (Fused)    (Video)
   |         |          |          |          |          |
   +----+----+----+-----+----+-----+----+-----+----+-----+
        |         |          |          |          |
        v         v          v          v          v
   [TotalSeg] [ANTsPy]   [ANTsPy]  [PyTorch]  [PyVista]
   [èƒŒæ™¯ç½®æ¢] [build]    [SyNé…å‡†] [Inpaint]  [Render]

[è¾…åŠ©ç»„ä»¶] ====================================================================
+---------------+---------------+---------------+---------------+
| checkpoints/  |    logs/      |    tests/     |  notebooks/   |
|---------------|---------------|---------------|---------------|
| best.pth      | pipeline.log  | test_io.py    | check_data.   |
| latest.pth    | training.log  | test_metrics  | test_ants.    |
| train_log.json| preprocess.log| conftest.py   | viz_demo.ipynb|
+---------------+---------------+---------------+---------------+

[é…ç½®æ–‡ä»¶ config.yaml] ========================================================
+------------------------------------------------------------------------------+
| paths:         æ•°æ®ç›®å½•è·¯å¾„      | training:    æ‰¹æ¬¡/å­¦ä¹ ç‡/æŸå¤±æƒé‡          |
| naming:        æ–‡ä»¶å‘½åè§„èŒƒ      | evaluation:  SSIM/Dice/PSNRé˜ˆå€¼            |
| data_format:   NIfTI/CT/Maskçº¦å®š | visualization: é¢œè‰²/é€æ˜åº¦/å‘¼å¸å‚æ•°        |
| preprocessing: åˆ†å‰²/LAAé˜ˆå€¼     | registration: SyNè¿­ä»£/ç¼©æ”¾å› å­             |
+------------------------------------------------------------------------------+

[.gitignore] ==================================================================
| data/ | checkpoints/ | logs/ | __pycache__/ | .venv/ | *.nii.gz | *.pth    |
+------------------------------------------------------------------------------+
```

---

## ä¸‰ã€å·¥ç¨‹æ–‡ä»¶ç»“æ„è®¾è®¡

```
DigitalTwinLung_COPD/
â”‚
â”œâ”€â”€ README.md                     # é¡¹ç›®è¯´æ˜ä¹¦ (é¡¹ç›®èƒŒæ™¯ã€å®‰è£…æ­¥éª¤ã€è¿è¡Œæ–¹æ³•)
â”œâ”€â”€ requirements.txt              # ä¾èµ–åº“åˆ—è¡¨ (pip install -r requirements.txt)
â”œâ”€â”€ config.yaml                   # [é‡è¦] å…¨å±€é…ç½®æ–‡ä»¶ (è·¯å¾„ã€é˜ˆå€¼ã€è¶…å‚æ•°ã€æ•°æ®å¥‘çº¦)
â”œâ”€â”€ .gitignore                    # [é‡è¦] Git å¿½ç•¥è§„åˆ™æ–‡ä»¶
â”œâ”€â”€ Engineering_Edition.md        # é¡¹ç›®æ•°æ®ç­–ç•¥ä¸å·¥ç¨‹å®æ–½æŒ‡å—
â”œâ”€â”€ v5_1_Final.md                 # ç ”ç©¶è¯¾é¢˜è¯„ä¼°ä¸å®æ–½æ–¹æ¡ˆ
â”‚
â”œâ”€â”€ # === æµæ°´çº¿å…¥å£è„šæœ¬ (2025-12-30 æ¸…ç†å) ===
â”œâ”€â”€ run_mvp_pipeline.py           # Phase 1 MVP ä¸»æµç¨‹ (14KB)
â”œâ”€â”€ run_phase2_pipeline.py        # Phase 2 åº•åº§æ„å»ºä¸»æµç¨‹ (33KB)
â”œâ”€â”€ run_phase3_pipeline.py        # Phase 3 ç—…ç†æ˜ å°„ä¸»æµç¨‹ (19KB) [2025-12-30 æ–°å¢]
â”œâ”€â”€ process_copd_data.py          # COPD æ•°æ®é¢„å¤„ç†è„šæœ¬ [2025-12-30 æ–°å¢]
â”‚
â”œâ”€â”€ # === å·¥å…·è„šæœ¬ ===
â”œâ”€â”€ prepare_phase2_data.py        # æ•°æ®å‡†å¤‡å·¥å…· (18KB) - DICOMâ†’NIfTI è½¬æ¢
â”œâ”€â”€ generate_multiview_comparison.py  # å¤šè§†è§’å¯¹æ¯”å¯è§†åŒ–å·¥å…· (16KB)
â”‚
â”œâ”€â”€ # === å·²åˆ é™¤çš„åºŸå¼ƒè„šæœ¬ (2025-12-30) ===
â”œâ”€â”€ # - run_pipeline.py           # [å·²åˆ é™¤] æ—§ç‰ˆå…¥å£è„šæœ¬
â”œâ”€â”€ # - run_phase2_atlas.py       # [å·²åˆ é™¤] åŠŸèƒ½åˆå¹¶åˆ° run_phase2_pipeline.py
â”œâ”€â”€ # - run_segmentation_gpu.py   # [å·²åˆ é™¤] åŠŸèƒ½è¿ç§»åˆ° src/01_preprocessing/
â”œâ”€â”€ # - temp_old_version.py       # [å·²åˆ é™¤] ä¸´æ—¶å¤‡ä»½
â”‚
â”œâ”€â”€ data/                         # ã€æ•°æ®å±‚ã€‘ (åœ¨ .gitignore ä¸­å¿½ç•¥)
â”‚   â”œâ”€â”€ 00_raw/                   # åŸå§‹ä¸‹è½½æ•°æ® (åªè¯»ï¼Œä¸åŠ¨)
â”‚   â”‚   â”œâ”€â”€ normal/               # LIDC-IDRI ç­›é€‰å‡ºçš„æ­£å¸¸äºº DICOM/NIfTI
â”‚   â”‚   â””â”€â”€ copd/                 # COPD æ‚£è€… DICOM/NIfTI
â”‚   â”‚
â”‚   â”œâ”€â”€ 01_cleaned/               # é¢„å¤„ç†åçš„çº¯å‡€æ•°æ®
â”‚   â”‚   â”œâ”€â”€ normal_clean/         # ä»…å«è‚ºéƒ¨ï¼ŒèƒŒæ™¯ä¸º -1000 (normal_001_clean.nii.gz)
â”‚   â”‚   â”œâ”€â”€ normal_mask/          # è‚ºéƒ¨äºŒå€¼ mask (normal_001_mask.nii.gz)
â”‚   â”‚   â”‚   â”œâ”€â”€ *_mask.nii.gz             # è‚ºéƒ¨äºŒå€¼ mask
â”‚   â”‚   â”‚   â”œâ”€â”€ *_trachea_mask.nii.gz     # [æ–°å¢] æ°”ç®¡æ ‘ mask
â”‚   â”‚   â”‚   â””â”€â”€ *_lung_lobes_labeled.nii.gz  # [æ–°å¢] 5è‚ºå¶æ ‡ç­¾ mask (å€¼1-5)
â”‚   â”‚   â”œâ”€â”€ copd_clean/           # COPD èƒŒæ™¯æ¸…ç†å
â”‚   â”‚   â”œâ”€â”€ copd_mask/            # COPD è‚ºéƒ¨ mask
â”‚   â”‚   â””â”€â”€ copd_emphysema/       # LAA-950 æå–çš„è‚ºæ°”è‚¿ç—…ç¶
â”‚   â”‚
â”‚   â”œâ”€â”€ 02_atlas/                 # æ ‡å‡†æ•°å­—å­ªç”Ÿåº•åº§
â”‚   â”‚   â”œâ”€â”€ standard_template.nii.gz  # æœ€ç»ˆç”Ÿæˆçš„å¹³å‡ CT
â”‚   â”‚   â”œâ”€â”€ standard_mask.nii.gz      # å¯¹åº”çš„è‚ºéƒ¨ Mask
â”‚   â”‚   â””â”€â”€ standard_trachea_mask.nii.gz  # [æ–°å¢] æ°”ç®¡æ ‘æ¨¡æ¿ Mask
â”‚   â”‚
â”‚   â”œâ”€â”€ 03_mapped/                # é…å‡†åçš„ä¸­é—´ç»“æœ
â”‚   â”‚   â””â”€â”€ patient_001/          # æŒ‰ç—…äººIDå­˜æ”¾
â”‚   â”‚       â”œâ”€â”€ warped_lesion.nii.gz  # å˜å½¢åˆ°æ ‡å‡†ç©ºé—´çš„ç—…ç¶
â”‚   â”‚       â””â”€â”€ transform.mat         # å˜å½¢åœºçŸ©é˜µ
â”‚   â”‚
â”‚   â””â”€â”€ 04_final_viz/             # æœ€ç»ˆç”¨äºå¯è§†åŒ–çš„èåˆæ–‡ä»¶
â”‚       â”œâ”€â”€ fused_copd_twin.nii.gz
â”‚       â””â”€â”€ renders/              # æ¸²æŸ“è¾“å‡ºå›¾ç‰‡
â”‚
â”œâ”€â”€ checkpoints/                  # ã€æ¨¡å‹å±‚ã€‘ è®­ç»ƒæ¨¡å‹æƒé‡ (åœ¨ .gitignore ä¸­å¿½ç•¥)
â”‚   â”œâ”€â”€ inpainting_best.pth       # æœ€ä½³æ¨¡å‹æƒé‡
â”‚   â”œâ”€â”€ inpainting_latest.pth     # æœ€æ–°æ¨¡å‹æƒé‡
â”‚   â””â”€â”€ training_log.json         # è®­ç»ƒå†å²è®°å½•
â”‚
â”œâ”€â”€ logs/                         # ã€æ—¥å¿—å±‚ã€‘ è¿è¡Œæ—¥å¿— (åœ¨ .gitignore ä¸­å¿½ç•¥)
â”‚   â”œâ”€â”€ preprocessing_2025xxxx.log
â”‚   â”œâ”€â”€ training_2025xxxx.log
â”‚   â””â”€â”€ pipeline.log              # ä¸»æµç¨‹æ—¥å¿—
â”‚
â”œâ”€â”€ src/                          # ã€ä»£ç å±‚ã€‘ æ ¸å¿ƒé€»è¾‘ä»£ç 
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚
â”‚   â”œâ”€â”€ utils/                    # å·¥å…·åŒ… (å¤ç”¨å‡½æ•°)
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ io.py                 # è¯»å–/ä¿å­˜ NIfTI, DICOM
â”‚   â”‚   â”œâ”€â”€ math_ops.py           # å½’ä¸€åŒ–ã€è£å‰ªã€çŸ©é˜µè¿ç®—
â”‚   â”‚   â”œâ”€â”€ visualization.py      # PyVista é€šç”¨ç»˜å›¾å‡½æ•°
â”‚   â”‚   â”œâ”€â”€ logger.py             # ç»Ÿä¸€æ—¥å¿—é…ç½®
â”‚   â”‚   â”œâ”€â”€ metrics.py            # è¯„ä¼°æŒ‡æ ‡è®¡ç®—
â”‚   â”‚   â”œâ”€â”€ data_quality.py       # æ•°æ®è´¨é‡æ£€æŸ¥
â”‚   â”‚   â””â”€â”€ validation.py         # é…å‡†ç»“æœéªŒè¯ä¸è¯Šæ–­
â”‚   â”‚
â”‚   â”œâ”€â”€ 01_preprocessing/         # é˜¶æ®µä¸€ï¼šæ¸…æ´—ä¸ç‰¹å¾æå–
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ run_segmentation.py   # è°ƒç”¨ TotalSegmentator
â”‚   â”‚   â”œâ”€â”€ clean_background.py   # å»é™¤éª¨éª¼èƒŒæ™¯
â”‚   â”‚   â””â”€â”€ extract_emphysema.py  # LAA-950 ç®—æ³•æå–ç—…ç¶ Mask
â”‚   â”‚
â”‚   â”œâ”€â”€ 02_atlas_build/           # é˜¶æ®µäºŒï¼šåº•åº§æ„å»º
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â””â”€â”€ build_template_ants.py# è°ƒç”¨ ants.build_template
â”‚   â”‚
â”‚   â”œâ”€â”€ 03_registration/          # é˜¶æ®µä¸‰(ä¸Š)ï¼šç©ºé—´æ˜ å°„
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â””â”€â”€ register_lesions.py   # è®¡ç®—å˜å½¢åœºå¹¶æ‰­æ›² Mask
â”‚   â”‚
â”‚   â”œâ”€â”€ 04_texture_synthesis/     # é˜¶æ®µä¸‰(ä¸‹)ï¼šAI çº¹ç†èåˆ
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ dataset.py            # PyTorch æ•°æ®åŠ è½½å™¨ (æå– Patch)
â”‚   â”‚   â”œâ”€â”€ network.py            # å®šä¹‰ GAN / Inpainting æ¨¡å‹ç»“æ„
â”‚   â”‚   â”œâ”€â”€ losses.py             # æŸå¤±å‡½æ•°å®šä¹‰
â”‚   â”‚   â”œâ”€â”€ train.py              # è®­ç»ƒè„šæœ¬
â”‚   â”‚   â””â”€â”€ inference_fuse.py     # æ¨ç†è„šæœ¬ï¼šç”Ÿæˆèåˆåçš„ CT
â”‚   â”‚
â”‚   â””â”€â”€ 05_visualization/         # é˜¶æ®µå››ï¼š3D å¯è§†åŒ–
â”‚       â”œâ”€â”€ __init__.py
â”‚       â”œâ”€â”€ static_render.py      # ç”Ÿæˆé«˜æ¸…æˆªå›¾
â”‚       â””â”€â”€ dynamic_breath.py     # ç”Ÿæˆå‘¼å¸åŠ¨ç”» (å¾ªç¯æ­£å¼¦æ³¢é€»è¾‘)
â”‚
â”œâ”€â”€ tests/                        # ã€æµ‹è¯•å±‚ã€‘ å•å…ƒæµ‹è¯•ä¸é›†æˆæµ‹è¯•
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ conftest.py               # pytest é…ç½®ä¸ fixtures
â”‚   â”œâ”€â”€ test_io.py                # æµ‹è¯•æ•°æ®è¯»å†™åŠŸèƒ½
â”‚   â”œâ”€â”€ test_preprocessing.py     # æµ‹è¯•é¢„å¤„ç†æµç¨‹
â”‚   â”œâ”€â”€ test_registration.py      # æµ‹è¯•é…å‡†åŠŸèƒ½
â”‚   â”œâ”€â”€ test_network.py           # æµ‹è¯•ç½‘ç»œå‰å‘ä¼ æ’­
â”‚   â”œâ”€â”€ test_metrics.py           # æµ‹è¯•è¯„ä¼°æŒ‡æ ‡è®¡ç®—
â”‚   â””â”€â”€ test_data_quality.py      # æµ‹è¯•æ•°æ®è´¨é‡æ£€æŸ¥
â”‚
â”œâ”€â”€ notebooks/                    # ã€å®éªŒå±‚ã€‘ Jupyter Notebooks (ç”¨äºæ¢ç´¢å’Œè°ƒè¯•)
â”‚   â”œâ”€â”€ 1.0_check_data.ipynb      # æ£€æŸ¥æ•°æ®è´¨é‡
â”‚   â”œâ”€â”€ 2.0_test_ants.ipynb       # æµ‹è¯•å°æ ·æœ¬é…å‡†å‚æ•°
â”‚   â”œâ”€â”€ 3.0_train_debug.ipynb     # AI è®­ç»ƒè°ƒè¯•
â”‚   â””â”€â”€ 4.0_viz_demo.ipynb        # å¿«é€ŸæŸ¥çœ‹å¯è§†åŒ–æ•ˆæœ
â”‚
â””â”€â”€ docs/                         # ã€æ–‡æ¡£å±‚ã€‘
    â”œâ”€â”€ method_v5.1.md            # ä¿å­˜çš„æŠ€æœ¯æ–¹æ¡ˆæ–‡æ¡£
    â””â”€â”€ research_log.md           # å®éªŒæ—¥å¿—
```

---

## å››ã€ä½¿ç”¨è¯´æ˜

### å¦‚ä½•æ›´æ–°è¿›åº¦æ ‡è®°

1. **æ ‡è®°ä»»åŠ¡çŠ¶æ€**
   - å½“å¼€å§‹æŸä¸ªä»»åŠ¡æ—¶ï¼Œå°† `[ ]` ä¿®æ”¹ä¸º `[~]`
   - å½“å®ŒæˆæŸä¸ªä»»åŠ¡æ—¶ï¼Œå°† `[~]` ä¿®æ”¹ä¸º `[x]`

2. **æ›´æ–°ç¤ºä¾‹**
   ```
   # ä»»åŠ¡æœªå¼€å§‹
   [ ] ç¯å¢ƒé…ç½®

   # ä»»åŠ¡è¿›è¡Œä¸­
   [~] ç¯å¢ƒé…ç½®

   # ä»»åŠ¡å·²å®Œæˆ
   [x] ç¯å¢ƒé…ç½®
   ```

3. **é˜¶æ®µçŠ¶æ€æ›´æ–°è§„åˆ™**
   - å½“é˜¶æ®µå†…æ‰€æœ‰ä»»åŠ¡å®Œæˆåï¼Œå°†é˜¶æ®µæ ‡è®°æ”¹ä¸º `[x]`
   - å½“é˜¶æ®µå†…æœ‰ä»»åŠ¡è¿›è¡Œä¸­ï¼Œå°†é˜¶æ®µæ ‡è®°æ”¹ä¸º `[~]`

4. **å»ºè®®çš„æ›´æ–°é¢‘ç‡**
   - æ¯æ¬¡å·¥ä½œç»“æŸæ—¶æ›´æ–°è¿›åº¦
   - æ¯å‘¨è‡³å°‘æ›´æ–°ä¸€æ¬¡
   - é‡åˆ°é‡è¦é‡Œç¨‹ç¢‘æ—¶åŠæ—¶æ›´æ–°

5. **ç‰ˆæœ¬æ§åˆ¶**
   - å»ºè®®å°†æ­¤æ–‡ä»¶çº³å…¥ Git ç‰ˆæœ¬æ§åˆ¶
   - æ¯æ¬¡æ›´æ–°åæäº¤ï¼Œä¾¿äºè¿½è¸ªé¡¹ç›®å†å²è¿›åº¦

---

*æ–‡æ¡£ç”Ÿæˆå·¥å…·ï¼šAugment Agent*

